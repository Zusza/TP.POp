namespace TODO2
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button2_Click(object sender, EventArgs e)
        {
            Close();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            string filePath = "F:\\PAD\\TODO2\\dane.txt";
            string name = textBox1.Text;
            string gender;
            if (radioButton1.Checked)
            {
                gender = "Mężczyzna";
            }
            else if (radioButton2.Checked)
            {
                gender = "Kobieta";
            }
            else
            {
                gender = "Nie wybrano płci";
            }
            string info = textBox2.Text;
            string fileContent = $"Imię: {name}\nPłeć: {gender}\nDodatkowe informacje:\n{info}";
            File.WriteAllText(filePath, fileContent);
            textBox1.Text = "";
            textBox2.Text = "";
            radioButton1.Checked = false;
            radioButton2.Checked = false;
        }

        private void button3_Click(object sender, EventArgs e)
        {
            string filePath = "F:\\PAD\\TODO2\\dane.txt";
            string[] lines = File.ReadAllLines(filePath);
            var people = new List<string[]>();
            for (int i = 0; i < lines.Length; i += 4)
            {
                people.Add(new string[]
                {
                    lines[i].Substring(5),                 
                    lines[i + 1].Substring(5),            
                    lines[i + 3]                           
                });
            }
            var form = new Form
            {
                Text = "Lista Osób",
                Size = new Size(800, 500)
            };
            var listView = new ListView
            {
                View = View.Details,
                FullRowSelect = true,
                Size = new Size(380, 400),
                Location = new Point(10, 10)
            };
            listView.Columns.Add("Imię", 120);
            listView.Columns.Add("Płeć", 100);
            listView.Columns.Add("Informacje", 150);
            foreach (var person in people)
            {
                var item = new ListViewItem(person[0]);
                item.SubItems.Add(person[1]);
                item.SubItems.Add(person[2]);
                listView.Items.Add(item);
            }
            var dataGridView = new DataGridView
            {
                Size = new Size(380, 400),
                Location = new Point(400, 10),
                ReadOnly = true,
                ColumnCount = 3
            };
            dataGridView.Columns[0].HeaderText = "Imię";
            dataGridView.Columns[1].HeaderText = "Płeć";
            dataGridView.Columns[2].HeaderText = "Informacje";
            foreach (var person in people)
            {
                dataGridView.Rows.Add(person);
            }
            form.Controls.Add(listView);
            form.Controls.Add(dataGridView);
            form.ShowDialog();
        }
    }
}
